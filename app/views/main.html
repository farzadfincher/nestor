<div class="row base-panel" id="left-panel"
     ng-class="isLeftOpen ? 'left-panel-open' : 'left-panel-close'">

  <div class="col-lg-2 menu">
    <div ng-repeat="option in leftPanelOptions" ng-show="option.visible">
      <img width="25px" ng-src="{{option.image}}" ng-click="optionPressed(option)">
      <br>
      <br>
    </div>
  </div>

  <div class="col-lg-10 options">
    <button ng-click="closeLeft()" class="toggleleft">
      <i class="fa fa-close"></i></button>
    <form id="searchbox">
      <p class="fieldset">
        <label class="glyphicon glyphicon-search"></label>
      </p>
      <input ng-model="searchText" type="text" placeholder="Search..." required class="search"></form>
    <tabset justified="true">
      <tab heading="Components" class="components-tab">
        <div ng-repeat="comp in components | filter:searchText">
          <div
            class="empty-container"
            ng-drag="true"
            ng-drag-success="onDragComplete($data,$event)"
            ng-drag-data="comp"
            ng-center-anchor="false">
            <div class="pdiv">
              <p>
                {{comp.name}}</p>
            </div>
          </div>
          <div class="component-item">
            <div class="imgdiv">
              <img class="component-image" ng-src="{{comp.image}}"/>
            </div>
            <div class="pdiv">
              <p>
                {{comp.name}}</p>
            </div>
          </div>
        </div>
      </tab>
    </tabset>
  </div>

</div>

<div id="mid-container">
  <div
    id="middle-panel"
    class="base-panel"
    ng-class="isLeftOpen ? 'middle-panel-smaller' : 'middle-panel-bigger'"
    ng-drop="true"
    ng-drop-success="onDropComplete($data,$event)"
    id="container"
    plumb-listeners
    on-connection-established="connectionEstablished(sourceName, targetName)"
    on-connection-detached="connectionDetached(sourceName, targetName)"
    on-connection-moved-from-source="connectionMovedFromSource(originalSourceName, newSourceName, targetName)"
    on-connection-moved-from-target="connectionMovedFromTarget(sourceName, originalTargetName, newTargetName)"
    class="center-column"
    >

    <!--<div class="canvasbtns">-->
    <!--<button class="btn btn-warning" ng-click="cancel()"><span-->
    <!--class="glyphicon glyphicon-floppy-save"></span>-->
    <!--</button>-->
    <!--<button class="btn btn-primary" ng-click="download()"><span-->
    <!--class="glyphicon glyphicon-cloud-download"></span>-->
    <!--</button>-->
    <!--</div>-->
    <!-- The actual components on the canvas -->
    <div plumb-item
         ng-click="clickCallback(component)"
         class="item"
         ng-class="{selectedComponent : component.id === selectedComponent.id}"
         ng-repeat="component in addedComponents"
         ng-style="{ 'left':component.x, 'top':component.y }"
         data-identifier="{{component.id}}"
         data-component-name={{component.name}}
      >
      <p align="left">
        <button ng-click="deleteClicked(component)" type="button">X</button>
      </p>
      <img ng-src="{{component.image}}"/>

      <p class="title">
        {{component.name}}</p>


      <div plumb-connect
           data-parent-name="{{component.parent}}"
           class="ep"
        ></div>
    </div>
  </div>
</div>

<div ui-ace="{theme:'ambiance', mode: 'json', onChange: templateStringChanged, onLoad : aceEditorLoaded}"
     ng-model="templateString"
     id="right-panel">
</div>

<div id="right-panel-resizer"
     resizer="vertical"
     resizer-width="0"
     resizer-left="#middle-panel"
     resizer-right="#right-panel"
     resizer-leftmost="#left-panel"
     open-close-difference="17"
     resizer-max="750"
  >
</div>
</div>

<!--This is the visual of the component card while its being dragged-->
<div
  ng-drag-clone="" class="dragging">
  <div class="component-item">
    <div class="imgdiv">
      <img class="component-image" ng-src="{{clonedData.image}}"/>
    </div>
    <div class="pdiv">
      <p>
        {{clonedData.name}}</p>
    </div>
  </div>
</div>
